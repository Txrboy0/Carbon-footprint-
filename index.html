<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô‡∏ü‡∏∏‡∏ï‡∏û‡∏£‡∏¥‡πâ‡∏ô‡∏ó‡πå</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(to bottom right, #c1a3ff, #e3d0ff);
        }
        h1 {
            color: #4b0082;
            text-shadow: 1px 1px 2px #ffffff;
        }
        input {
            margin: 5px;
            padding: 8px;
            width: 160px;
            border-radius: 10px;
            border: 1px solid #ccc;
            box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
        }
        button {
            margin: 10px;
            padding: 12px 25px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }
        button:hover {
            background: #8e44ad;
        }
        .result {
            font-size: 1.1em;
            margin-top: 20px;
        }
        #advice {
            color: #6a0dad;
            font-weight: bold;
            background: #f2e6ff;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 10px;
            max-width: 90%;
            white-space: pre-line;
        }
        canvas {
            max-width: 450px;
            margin: 20px auto;
            background: white;
            border-radius: 20px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        }
        @media (max-width: 480px) {
            input { width: 140px; }
            canvas { max-width: 320px; }
        }
    </style>
</head>
<body>

    <h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô‡∏ü‡∏∏‡∏ï‡∏û‡∏£‡∏¥‡πâ‡∏ô‡∏ó‡πå üå±</h1>

    <div>
        <label>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå (‡∏Å‡∏°./‡πÄ‡∏î‡∏∑‡∏≠‡∏ô): </label>
        <input type="number" id="car" value="0" min="0" placeholder="‡∏Å‡∏°./‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"><br>

        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å (‡∏°‡∏∑‡πâ‡∏≠/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô): </label>
        <input type="number" id="meat" value="0" min="0" placeholder="‡∏°‡∏∑‡πâ‡∏≠/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"><br>

        <label>‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (kWh/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô): </label>
        <input type="number" id="electric" value="0" min="0" placeholder="kWh/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"><br>

        <button id="calcBtn">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
    </div>

    <div class="result">
        <p id="total">‡∏£‡∏ß‡∏°: 0 kg CO‚ÇÇ</p>
        <p id="advice"></p>
    </div>

    <canvas id="co2Chart"></canvas>

    <script>
        let chart;

        function calculate() {
            let car = parseFloat(document.getElementById("car").value) || 0;
            let meat = parseFloat(document.getElementById("meat").value) || 0;
            let electric = parseFloat(document.getElementById("electric").value) || 0;

            // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á): ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå 0.21 kg CO2 ‡∏ï‡πà‡∏≠ ‡∏Å‡∏°., ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå 2.5 kg CO2 ‡∏ï‡πà‡∏≠‡∏°‡∏∑‡πâ‡∏≠, ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ 0.4 kg CO2 ‡∏ï‡πà‡∏≠ kWh
            let co2_car = car * 0.21;
            let co2_meat = meat * 2.5;
            let co2_electric = electric * 0.4;

            let total = co2_car + co2_meat + co2_electric;
            document.getElementById("total").innerText = "‡∏£‡∏ß‡∏°: " + total.toFixed(2) + " kg CO‚ÇÇ";

            // ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏î CO‚ÇÇ
            let advice = "";
            if(car > 50) advice += "üöó ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î CO‚ÇÇ\n";
            if(meat > 15) advice += "ü•© ‡∏•‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏±‡∏Å‡πÉ‡∏ô‡∏°‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£\n";
            if(electric > 200) advice += "üí° ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô\n";
            if(advice === "") advice = "üëç ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß CO‚ÇÇ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°!";
            document.getElementById("advice").innerText = advice;

            // ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• ‡∏ü‡πâ‡∏≤-‡∏ä‡∏°‡∏û‡∏π-‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
            const ctx = document.getElementById('co2Chart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå', '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå', '‡πÑ‡∏ü‡∏ü‡πâ‡∏≤'],
                    datasets: [{
                        data: [co2_car, co2_meat, co2_electric],
                        backgroundColor: ['#a0c4ff','#ffc6ff','#fff7a0'],
                        borderColor: ['#8bb0ff','#ff99ff','#fff280'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    animation: { animateScale: true },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.formattedValue + ' kg CO‚ÇÇ';
                                }
                            }
                        }
                    }
                }
            });
        }

        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏î Enter
        document.getElementById('calcBtn').addEventListener('click', calculate);
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') calculate();
        });
    </script>

</body>
</html>
